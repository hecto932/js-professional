{"version":3,"sources":["assets/MediaPlayer.js","assets/plugins/AutoPlay.js","assets/plugins/AutoPause.js","assets/index.js"],"names":["MediaPlayer","config","media","el","plugins","_initPlugins","prototype","player","play","pause","muted","value","forEach","plugin","run","togglePlay","paused","mute","unmute","AutoPlay","AutoPause","threshold","handleIntersection","bind","handleVisibilityChange","observer","IntersectionObserver","observe","document","addEventListener","isVisible","visibilityState","entries","entry","intersectionRatio","video","querySelector","button","onclick","playButton","muteButton","navigator","serviceWorker","register","catch","err","console","error","message"],"mappings":";;AGAA;;AACA;;AACA;AHFA,ACAA,SDASA,ACAAmB,QAAT,GDAA,ACAoB,CDAClB,ACAC,MDAtB,EAA6B;AAC3B,OAAKC,KAAL,GAAaD,MAAM,CAACE,EAApB;AACA,ACDFgB,ODCOf,CCDC,CAACE,KDCP,GAAeL,CCDjB,CAAmBa,GAAnB,CDCuB,CAACV,CCDC,MDCR,IAAkB,ACDDG,EDChC,ICDuB,EAAiB;AEG1C,AFFE,IEEI4B,EFFA,CAAC5B,EEEI,GAAGqB,CFFD,CAAClB,KAAZ,CEEoB,CAAC0B,AFFF,aEEP,CAAuB,OAAvB,CAAd;AHAE,AGCF,AFFI7B,IEEEA,AFFFA,GDCGF,GGCK,AFFF,CAACK,EEEI,GFFX,CEEeV,EHDjB,ACDiB,IAAf,cEEW,CAAgB;AHA9B,AGCCG,AFFC,EEEDA,EAAE,EAAEgC,KADyB;AAE7B/B,EAAAA,EDPIgB,KCOG,EAAE,CAAC,IAAID,iBAAJ,EAAD,EAAiB,IAAIC,kBAAJ,EAAjB;AHAXpB,AGF+B,ADJ7B,ADIAO,CEAa,CAAf,AFAEA,MAAM,CAACC,EDEE,CAACF,CCFV,QDEF,CAAsBD,CENN,WFMhB,GAAqC,YAAW;AAAA,AGGhD,ADTgB,ADKf,CALD,GESMgC,MAAM,GAAGT,QAAQ,CAACQ,aAAT,CAAuB,QAAvB,CAAf;;AHFE,AGGFC,ADTI,MFMI9B,AGGF,CAAC+B,EDTEjB,GFMK,EGGd,CHHiB,ACAFF,EEGE,CDTb,GAAiB,IAAjB;AFOAX,AGEa,ADRb,IFMAA,IAAI,CGEeD,ADRde,CFMC,KGEmB,CAACP,UAAP,CDRnB,CCQa,EDRa,KAAKO,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAA1B;AFMM,AGEO,ADPb,CCOJ,QDPSC,IFKO,KAAI,CAAChB,IAAL,EAAN,MELN,GAA8B,KAAKgB,sBAAL,CAA4BD,IAA5B,CAAiC,IAAjC,CAA9B;AFKM,AEJP,KFGc;AAEbd,AGGJ,IHHIA,AGGE8B,KHHG,EAAE,GGGK,GAAGX,QAAQ,CAACQ,aAAT,CAAuB,aAAvB,CAAnB;AHHW,aAAM,KAAI,CAAC3B,KAAL,EAAN;AAAA,AGIX8B,KHNiB,KGMP,CAACD,OAAX,GAAqB;AHHjBpC,AGGiB,IHHjBA,KAAK,AGGkBK,EHHhB,IGGsB,CHHjBL,AGGkBa,KHNjB,GEDXR,ECOqB,EAAN,IDPP;ACOO,ADNjB,CCMJ,UDNSA,MAAL,GAAcA,MAAd;AFIA,AEFA,QFEIG,EEFEe,GFEN,GAAY,EEFE,GAAG,IAAIC,oBAAJ,CAAyB,KAAKJ,kBAA9B,EAAkD;AFGjE,AGGN,ADLMD,ICKAmB,IDLAnB,KFEO,CGGG,GAAGO,ADLJ,CFEG1B,CEFD,IFEJ,CAAWQ,AEFFW,CCKK,CAACe,GHHtB,UGGa,CAAuB,aAAvB,CAAnB;AHFK,AEJkE,KFFtD,EEEI,CAAjB;ACOJI,ADHIf,MAAAA,ICGM,CAACa,GDHC,CAACX,GCGb,GAAqB,CDHjB,CAAiB,KAAKpB,KCGC,CDHN,CAAYL,KAA7B;AFCA,AGGF,ADFE0B,MCEErB,ADFFqB,EFDIlB,IGGI,CHHR,AGGSR,CHHCS,AECF,CAACkB,GCEP,CHHF,AGGenB,EHHE,GGGnB,EAAwB,KDFtB,CAA0B,kBAA1B,EAA8C,KAAKc,sBAAnD;AFAE,AGGFjB,ADFD,ICECA,MAAM,CHHCL,AGGAgB,KHHL,CAAWR,AGGb,KHHE,GAAmBC,KAAnB;AACD,AGGF,GAFD,MAEO;AACLJ,IAAAA,MAAM,CAACU,IAAP;AHba,AGcd,GHdD,0CEWyB;AFAzB,AGID,ADHG,CCHJ,MHEOb,GECG0B,IFDR,CAAalB,IECI,GFDjB,AECoBgB,CFDC,OECO,CAACG,EFDRlB,MAAM,EAAI,KECX,KAA6B,SAA/C;AFAAA,IAAAA,MAAM,CAACC,GAAP,CAAWP,MAAX;AACD,AGIH,ADHI,GFHF,CGME,MDHIuB,SAAJ,EAAe,ECGIW,SAAvB,EAAkC;AHHjC,AGICA,ADHI,CFhBN,CGmBEA,SAAS,CAACC,CDHDnC,MAAL,CAAYC,IAAZ,CCGJ,CAAwBmC,QAAxB,CAAiC,sCAAjC,EAA2CC,KAA3C,CAAiD,UAAAC,GAAG,EAAI;AACtDC,ADHC,ICGDA,GDLA,ICKO,CAACC,CDHD,ICGP,CAAcF,GAAG,CAACG,OAAlB;AHHJhD,AGIG,ADHG,GCCJ,QHFS,CAACM,CECDC,MAAL,CAAYE,CFDlB,CAAsBD,GEChB,CFDN,GAA6B,YAAW;AACtC,AGID,ADHI,OFDEN,KAAL,CAAWM,IAAX;AACD,AECE,CFHH;;AAIAR,WAAW,CAACM,SAAZ,CAAsBG,KAAtB,GAA8B,YAAW;AACvC,OAAKP,KAAL,CAAWO,KAAX,qBECmBuB,SAAS;AFA7B,AECG,CFHJ,SEGUC,KAAK,GAAGD,OAAO,CAAC,CAAD,CAArB;AAEA,UAAMF,SAAS,GAAGG,KAAK,CAACC,iBAAN,IAA2B,KAAKb,SAAlD;AFDJrB,WAAW,CAACM,SAAZ,CAAsBS,UAAtB,GAAmC,YAAW;AAC5C,AEEE,MFFE,IEEEe,CFFG5B,KAAL,CAAWc,EEEb,EAAe,EFFjB,EAAuB;AACrB,AEEE,SFFGR,IAAL,AEEOD,MAAL,CAAYC,IAAZ;AFDH,AEEE,GFJH,IEEE,EFAK,IEEE;AFDP,AEEE,SFFGC,IEEEF,CFFP,KEEE,CAAYE,KAAZ;AFDH,AEEE;AFDJ,AEGE,CFTH;;AAQAT,WAAW,CAACM,SAAZ,CAAsBW,IAAtB,GAA6B,YAAW;AACtC,OAAKf,KAAL,CAAWQ,KAAX,GAAmB,IAAnB;AACD,CAFD;;AAIAV,WAAW,CAACM,GEAGc,MFAf,CAAsBF,MAAtB,GAA+B,YAAW;AACxC,OAAKhB,KAAL,CAAWQ,KAAX,GAAmB,KAAnB;AACD,CAFD;;eAIeV","file":"assets.8f4429fc.js","sourceRoot":"..","sourcesContent":["function MediaPlayer(config) {\n  this.media = config.el;\n  this.plugins = config.plugins || [];\n\n  this._initPlugins();\n}\n\nMediaPlayer.prototype._initPlugins = function() {\n  const player = {\n    play: () => this.play(),\n    pause: () => this.pause(),\n    media: this.media,\n    get muted() {\n      return this.media.muted;\n    },\n    set muted(value) {\n      this.media.muted = value;\n    },\n  };\n  this.plugins.forEach(plugin => {\n    plugin.run(player);\n  });\n};\n\nMediaPlayer.prototype.play = function() {\n  this.media.play();\n};\n\nMediaPlayer.prototype.pause = function() {\n  this.media.pause();\n};\n\nMediaPlayer.prototype.togglePlay = function() {\n  if (this.media.paused) {\n    this.play();\n  } else {\n    this.pause();\n  }\n};\n\nMediaPlayer.prototype.mute = function() {\n  this.media.muted = true;\n};\n\nMediaPlayer.prototype.unmute = function() {\n  this.media.muted = false;\n};\n\nexport default MediaPlayer;\n","function AutoPlay() {}\nAutoPlay.prototype.run = function(player) {\n  if (!player.muted) {\n    player.muted = true;\n  }\n  player.play();\n};\n\nexport default AutoPlay;\n","class AutoPause {\n  constructor() {\n    this.threshold = 0.25;\n    this.handleIntersection = this.handleIntersection.bind(this);\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n  }\n\n  run(player) {\n    this.player = player;\n\n    const observer = new IntersectionObserver(this.handleIntersection, {\n      threshold: this.threshold\n    })\n\n    observer.observe(this.player.media)\n\n    document.addEventListener('visibilitychange', this.handleVisibilityChange)\n  }\n\n  handleVisibilityChange() {\n    const isVisible = document.visibilityState === 'visible'\n\n    if (isVisible) {\n      this.player.play()\n    } else {\n      this.player.pause()\n    }\n  }\n\n\n  handleIntersection(entries) {\n    const entry = entries[0]\n\n    const isVisible = entry.intersectionRatio >= this.threshold\n\n    if (isVisible) {\n      this.player.play()\n    } else {\n      this.player.pause()\n    }\n\n  }\n}\n\nexport default AutoPause","import MediaPlayer from \"./MediaPlayer.js\";\nimport AutoPlay from \"./plugins/AutoPlay.js\";\nimport AutoPause from \"./plugins/AutoPause.js\";\n\nconst video = document.querySelector(\"video\");\nconst player = new MediaPlayer({\n  el: video,\n  plugins: [new AutoPlay(), new AutoPause()],\n});\n\nconst button = document.querySelector(\"button\");\nbutton.onclick = () => player.togglePlay();\n\nconst playButton = document.querySelector(\"#playButton\");\nplayButton.onclick = () => player.togglePlay();\n\nconst muteButton = document.querySelector(\"#muteButton\");\nmuteButton.onclick = () => {\n  if (player.media.muted) {\n    player.unmute();\n  } else {\n    player.mute();\n  }\n};\n\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker.register('/sw.js').catch(err => {\n    console.error(err.message)\n  })\n}"]}